# VEP 16: 账户地址规范

## 背景
为了支持调用合约时对请求交易翻倍收取配额，Pre-Mainnet版本对普通用户账户地址和合约账户地址做了区分。

## 账户地址规范

账户地址在区块链中使用一个21字节的数字表示，其中前20字节为地址，最后1字节为账户类型。

前20字节的生成规则为：
* 对于用户账户，对用户账户的公钥计算一个长度为20字节的哈希，作为用户账户地址的前20个字节。
* 对于合约账户，用合约创建账户的地址、创建合约请求交易的高度、创建合约请求交易的前一个账户块的哈希计算一个长度为20字节的哈希，作为合约账户地址的前20个字节。

最后1字节值为0表示用户账户，值为1表示合约账户。

在展示时，使用长度为55的字符串表示。

数字转换为字符串过程如下：

* 对于用户账户，字符串为：`vite_` + 前20字节的十六进制字符串 + 校验码的十六进制字符串
* 对于合约账户，字符串为：`vite_` + 前20字节的十六进制字符串 + 校验码按位取反后的十六进制字符串

字符串转换为数字的过程如下：

取字符串的第6 ~ 第45位十六进制字符串，作为前20字节。如果前20字节的校验码的十六进制字符串和原字符串的第46 ~ 第55位一致，则为用户账户，第21位数字为0；如果前20字节的校验码取反后的十六进制字符串和原字符串的第46 ~ 第55位一致，则为合约账户，第21位数字为1。

其中校验码计算方式为取前20字节计算一个长度为5字节的哈希。



